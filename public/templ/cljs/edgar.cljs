(ns edgar
  (:use [jayq.core :only [$ css inner]])
  #_(:require-macros [shoreleave.remotes.macros :as macros])
  #_(:require [clojure.browser.repl :as repl]
            [shoreleave.remotes.http-rpc :as rpc]))

#_(repl/connect "http://localhost:9000/repl")

#_(rpc/remote-callback :heartbeat ["heartbeat"]
                     #()
                     #_#(js/alert %))

;; Adding vertical tabs. Equivalent to:
;; $( "#tabs" ).tabs().addClass( "ui-tabs-vertical ui-helper-clearfix" );
(.addClass (.tabs
            ($ "#tabs"))
           "ui-tabs-vertical ui-helper-clearfix")

;; Equivalent to: $( "#tabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" );
(.addClass (.removeClass ($ "#tabs li")
                         "ui-corner-top")
           "ui-corner-left")

;; Scrolling with Lionbars
(.lionbars ($ ".tab-content"))


;;edgar.tick_list = [[1368215573010, 203.98], [1368215576331, 203.99], [1368215576857, 203.99], [1368215577765, 203.99], [1368215578769, 204.0], [1368215579272, 204.01], [1368215579517, 204.02], [1368215581769, 204.02], [1368215583602, 204.01], [1368215585650, 204.02], [1368215586060, 204.02], [1368215587029, 204.01], [1368215588318, 204.02], [1368215589335, 204.01], [1368215589536, 204.01], [1368215589846, 204.0], [1368215591079, 203.99], [1368215591789, 203.99], [1368215592104, 203.98], [1368215592615, 203.98], [1368215592758, 203.99], [1368215594039, 203.97], [1368215597119, 203.98], [1368215597632, 203.97], [1368215599396, 203.97], [1368215603876, 203.96], [1368215606059, 203.96], [1368215610316, 203.95], [1368215610634, 203.95], [1368215610813, 203.93], [1368215612886, 203.95], [1368215615858, 203.94], [1368215618621, 203.94], [1368215619138, 203.96], [1368215623846, 203.94], [1368215632669, 203.94], [1368215634709, 203.92], [1368215636587, 203.93], [1368215636952, 203.94], [1368215638328, 203.93]]


(comment

  $ ("#tab-one-graph").highcharts ('StockChart', {
                                                  rangeSelector : {
                                                                   selected : 1},

                                                  title : {
                                                           text : 'Test Stock Data'},

                                                  series : [{
                                                             name : 'Test Stock Data',
                                                             data : edgar.tick_list,
                                                             marker : {
                                                                       enabled : true,
                                                                       radius : 3},
                                                             shadow : true,
                                                             tooltip : {
                                                                        valueDecimals : 2}}]});
  )


;; Problems...
;; 1. converting arrays
;; 2. calling 3rd party javascript

(def tick-list (to-array [[1368215573010 203.98] [1368215576331 203.99] [1368215576857 203.99] [1368215577765 203.99] [1368215578769 204.0] [1368215579272 204.01] [1368215579517 204.02] [1368215581769 204.02] [1368215583602 204.01] [1368215585650 204.02] [1368215586060 204.02] [1368215587029 204.01] [1368215588318 204.02] [1368215589335 204.01] [1368215589536 204.01] [1368215589846 204.0] [1368215591079 203.99] [1368215591789 203.99] [1368215592104 203.98] [1368215592615 203.98] [1368215592758 203.99] [1368215594039 203.97] [1368215597119 203.98] [1368215597632 203.97] [1368215599396 203.97] [1368215603876 203.96] [1368215606059 203.96] [1368215610316 203.95] [1368215610634 203.95] [1368215610813 203.93] [1368215612886 203.95] [1368215615858 203.94] [1368215618621 203.94] [1368215619138 203.96] [1368215623846 203.94] [1368215632669 203.94] [1368215634709 203.92] [1368215636587 203.93] [1368215636952 203.94] [1368215638328 203.93]]))

(-> ($ "#tab-one-graph")
    (.highcharts "StockChart"
                 {:rangeSelector {:selected 1},
                  :title {:text "Test Stock Data"},
                  :series [{:name "Test Stock Data",
                            :data tick-list,
                            :marker {:enabled true, :radius 3},
                            :shadow true,
                            :tooltip {:valueDecimals 2}}]}
                 ))
